<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Academy Access ‚Äî Complete Learning Platform</title>
  <style>
    :root {
      --brand: #0088cc;
      --bg: #0e1621;
      --card: #17212b;
      --muted: #6b7b8d;
      --text: #e1e9f2;
      --border: #2b5278;
      --hover: #1f2d3d;
      --error: #ff3b30;
      --success: #4cd964;
      --accent: #ffd700;
      --warning: #ff9500;
    }
    
    [data-theme='light'] {
      --bg: #f5f5f5;
      --card: #ffffff;
      --muted: #6b7280;
      --text: #1a1a1a;
      --border: #e1e5e9;
      --hover: #f0f0f0;
      --error: #ff3b30;
      --success: #4cd964;
      --accent: #b8860b;
      --warning: #ff9500;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html, body {
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      line-height: 1.5;
    }

    header {
      background: linear-gradient(135deg, var(--brand), #005999);
      color: #fff;
      padding: 16px;
      text-align: center;
      font-weight: 600;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 2px 20px rgba(0,0,0,0.3);
    }

    .container {
      max-width: 1200px;
      margin: 20px auto;
      padding: 0 16px;
    }

    .topbar {
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .tabs {
      display: flex;
      border-radius: 10px;
      background: rgba(255,255,255,0.1);
      padding: 4px;
      flex-wrap: wrap;
    }

    .tabs button {
      padding: 10px 20px;
      border: 0;
      background: transparent;
      color: #fff;
      opacity: 0.8;
      cursor: pointer;
      border-radius: 8px;
      font-weight: 500;
      transition: all 0.2s ease;
      white-space: nowrap;
    }

    .tabs button:hover {
      opacity: 1;
      background: rgba(255,255,255,0.1);
    }

    .tabs button.active {
      background: rgba(255,255,255,0.2);
      opacity: 1;
    }

    .controls {
      display: flex;
      gap: 12px;
      align-items: center;
      flex-wrap: wrap;
    }

    .muted {
      color: var(--muted);
      font-size: 0.9rem;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 340px;
      gap: 20px;
    }

    .card {
      background: var(--card);
      padding: 20px;
      border-radius: 14px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      border: 1px solid var(--border);
    }

    .full {
      grid-column: 1 / -1;
    }

    h1, h2, h3, h4, h5 {
      margin: 0 0 12px 0;
      color: var(--text);
      font-weight: 600;
    }

    h1 { font-size: 2.2rem; }
    h2 { font-size: 1.8rem; }
    h3 { font-size: 1.4rem; }
    h4 { font-size: 1.2rem; }
    h5 { font-size: 1.1rem; }

    input, select, button, textarea {
      font-size: 15px;
      font-family: inherit;
    }

    .field {
      display: flex;
      flex-direction: column;
      margin-bottom: 16px;
    }

    .field label {
      margin-bottom: 6px;
      font-weight: 500;
      color: var(--text);
    }

    input, select, textarea {
      padding: 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text);
      transition: border 0.2s ease;
      width: 100%;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: var(--brand);
    }

    input.error {
      border-color: var(--error);
    }

    button {
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
      border: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
    }

    button.primary {
      background: var(--brand);
      color: #fff;
      padding: 12px 20px;
      border-radius: 10px;
    }

    button.primary:hover:not(:disabled) {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    button.primary:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    button.secondary {
      background: transparent;
      color: var(--text);
      padding: 10px 16px;
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    button.secondary:hover:not(:disabled) {
      background: var(--hover);
    }

    button.accent {
      background: linear-gradient(135deg, var(--accent), #ffed4e);
      color: #000;
      padding: 12px 20px;
      border-radius: 10px;
      font-weight: 600;
    }

    button.accent:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    /* Lectures */
    .lecture {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 16px;
      border-radius: 12px;
      margin-bottom: 12px;
      background: var(--card);
      border: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .lecture:hover {
      background: var(--hover);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .lecture .meta {
      display: flex;
      flex-direction: column;
      flex: 1;
    }

    /* Video area */
    .video-wrap {
      position: relative;
      border-radius: 12px;
      overflow: hidden;
      background: #000;
      margin-top: 12px;
    }

    .video-inner {
      position: relative;
      padding-top: 56.25%;
    }

    video {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      background: #000;
    }

    .watermark {
      position: absolute;
      padding: 8px 12px;
      border-radius: 8px;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      color: #fff;
      font-weight: 600;
      font-size: 14px;
      pointer-events: none;
      z-index: 10;
    }

    /* PDF Library */
    .pdf-library {
      display: none;
    }

    .pdf-header {
      text-align: center;
      margin-bottom: 2rem;
      padding: 2rem;
      background: linear-gradient(135deg, rgba(255,215,0,0.1), rgba(255,215,0,0.05));
      border-radius: 14px;
      border: 1px solid rgba(255,215,0,0.2);
    }

    .pdf-header h2 {
      font-size: 2.2rem;
      color: var(--accent);
      margin-bottom: 0.5rem;
    }

    .pdf-header p {
      font-size: 1.1rem;
      color: var(--muted);
      font-style: italic;
    }

    .pdf-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-top: 1rem;
    }

    .pdf-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .pdf-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--brand));
    }

    .pdf-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.3);
      border-color: var(--accent);
    }

    .pdf-title {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 1rem;
      color: var(--text);
      line-height: 1.4;
    }

    .pdf-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 1rem;
    }

    .pdf-course {
      font-size: 0.85rem;
      color: var(--muted);
      background: rgba(255,255,255,0.05);
      padding: 4px 8px;
      border-radius: 6px;
    }

    .download-btn {
      background: var(--brand);
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      text-decoration: none;
      font-size: 0.9rem;
      font-weight: 500;
      transition: all 0.2s ease;
      border: none;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .download-btn:hover {
      background: #1e90ff;
      transform: translateY(-1px);
    }

    .download-btn.accent {
      background: linear-gradient(135deg, var(--accent), #ffed4e);
      color: #000;
    }

    .download-btn.accent:hover {
      opacity: 0.9;
    }

    .pdf-search {
      margin: 2rem 0;
      position: relative;
    }

    .pdf-search input {
      width: 100%;
      padding: 12px 45px 12px 16px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text);
      font-size: 1rem;
    }

    .pdf-search::after {
      content: 'üîç';
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--muted);
    }

    /* Modal */
    .modal-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 20px;
      z-index: 1000;
    }

    .modal {
      background: var(--card);
      padding: 24px;
      border-radius: 16px;
      max-width: 500px;
      width: 100%;
      border: 1px solid var(--border);
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      max-height: 90vh;
      overflow-y: auto;
    }

    .show {
      display: flex;
    }

    /* Admin role warning */
    .admin-warning {
      background: rgba(255, 59, 48, 0.1);
      border: 1px solid rgba(255, 59, 48, 0.3);
      border-radius: 8px;
      padding: 12px;
      margin-top: 12px;
      font-size: 0.9rem;
    }

    .admin-warning p {
      margin: 0;
      color: var(--error);
    }

    /* Admin-only elements */
    .admin-only {
      display: none;
    }

    .admin-visible {
      display: block !important;
    }

    /* Responsive */
    @media (max-width: 980px) {
      .grid {
        grid-template-columns: 1fr;
      }
      .topbar {
        flex-direction: column;
        align-items: stretch;
        gap: 12px;
      }
      .controls {
        justify-content: flex-end;
      }
      .pdf-grid {
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
      }
    }

    @media (max-width: 768px) {
      .tabs {
        width: 100%;
        justify-content: center;
      }
      .tabs button {
        flex: 1;
        min-width: 0;
      }
    }

    @media (max-width: 480px) {
      input, button, select {
        font-size: 16px;
      }
      .watermark {
        font-size: 12px;
        padding: 6px 10px;
      }
      .container {
        padding: 0 12px;
      }
      .card {
        padding: 16px;
      }
      .pdf-grid {
        grid-template-columns: 1fr;
      }
      .pdf-header h2 {
        font-size: 1.8rem;
      }
      h1 { font-size: 1.8rem; }
      h2 { font-size: 1.5rem; }
      h3 { font-size: 1.3rem; }
    }

    /* Utility Classes */
    .hidden {
      display: none !important;
    }

    .loading {
      opacity: 0.7;
      pointer-events: none;
    }

    .pulse {
      animation: pulse 1.5s ease-in-out infinite;
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }

    /* Status indicators */
    .status {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      padding: 4px 8px;
      border-radius: 12px;
      background: rgba(0, 136, 204, 0.2);
      color: var(--brand);
    }

    .status.success {
      background: rgba(76, 217, 100, 0.2);
      color: var(--success);
    }

    .status.error {
      background: rgba(255, 59, 48, 0.2);
      color: var(--error);
    }

    .status.warning {
      background: rgba(255, 149, 0, 0.2);
      color: var(--warning);
    }

    .status::before {
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
    }

    .error-message {
      color: var(--error);
      font-size: 0.85rem;
      margin-top: 4px;
      display: none;
    }

    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: var(--muted);
    }

    .empty-state h4 {
      margin-bottom: 8px;
    }

    .feature-badge {
      position: absolute;
      top: 12px;
      right: 12px;
      background: var(--accent);
      color: #000;
      padding: 4px 8px;
      border-radius: 6px;
      font-size: 0.7rem;
      font-weight: 600;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 12px;
      margin-bottom: 20px;
    }

    .stat-card {
      background: var(--bg);
      padding: 16px;
      border-radius: 10px;
      text-align: center;
      border: 1px solid var(--border);
    }

    .stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--brand);
      margin-bottom: 4px;
    }

    .stat-label {
      font-size: 0.85rem;
      color: var(--muted);
    }

    /* Navigation Buttons */
    .navigation-buttons {
      display: flex;
      gap: 10px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .nav-btn {
      background: var(--card);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 10px 16px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: 500;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    .nav-btn:hover {
      background: var(--hover);
      transform: translateY(-2px);
    }
    /* Navigation Buttons */
.navigation-buttons {
  display: flex;
  gap: 10px;
  margin-top: 15px;
  flex-wrap: wrap;
}

.nav-btn {
  background: var(--card);
  border: 1px solid var(--border);
  color: var(--text);
  padding: 10px 16px;
  border-radius: 8px;
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  flex: 1;
  min-width: 120px;
  justify-content: center;
  text-align: center;
}

.nav-btn:hover {
  background: var(--hover);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}
  </style>
</head>
<body>
  <header>
    <h1>Academy Access</h1>
    <h3>"Unlock Your Academic Potential"</h3>
  </header>
  
  <div class="container">
    <div class="topbar">
      <div class="tabs" role="tablist">
        <button id="role-student" class="active">üéì Student</button>
        <button id="role-lecturer">üë®‚Äçüè´ Lecturer</button>
        <button id="role-pdfs">üìö StudyHub PDFs</button>
        <button id="role-admin" class="admin-only">‚öô Admin</button>
      </div>
      
      <div class="controls">
        <div class="muted" id="user-greet">Not logged in</div>
        <button class="secondary" id="themeBtn">üåô Dark Mode</button>
        <button class="primary" id="openAuth">üîë Login / Register</button>
        <button class="secondary hidden" id="logoutBtn">üö™ Logout</button>
      </div>
    </div>

    <!-- Academy Content -->
    <div id="academy-content">
      <div class="grid">
        <div id="mainColumn">
          <div id="student-area" class="card">
            <h3>üìπ Available Video Lectures</h3>
            <div id="lecturesList" style="margin-top:16px">
              <div class="lecture pulse">
                <div class="meta">
                  <strong>Loading lectures...</strong>
                  <div class="muted">Please wait while we load content</div>
                </div>
              </div>
            </div>
          </div>

          <div id="playerArea" class="card full hidden">
            <h3 id="playingTitle">üé¨ Now Playing</h3>
            <div class="video-wrap">
              <div class="video-inner">
                <video id="player" controls controlsList="nodownload noremoteplayback" preload="metadata" playsinline>
                  Your browser does not support HTML5 video.
                </video>
              </div>
              <div id="watermark" class="watermark">guest ‚Ä¢ no-id</div>
            </div>

            <div style="margin-top:16px;display:flex;gap:12px;align-items:center;flex-wrap:wrap">
              <button class="primary" id="aiExplain">ü§ñ AI Explanation</button>
              <div class="muted">üëÄ Views: <span id="playingViews">0</span></div>
              <div class="status hidden" id="viewStatus">View counted</div>
              <button class="secondary" id="closePlayer">‚ùå Close Player</button>
            </div>
          </div>

          <div id="lecturer-area" class="card hidden">
            <h3>üìä Lecturer Dashboard</h3>
            <div id="dashboardContent" style="margin-top:16px">
              <div class="muted">Please log in as a lecturer to access the dashboard</div>
            </div>
          </div>

          <div id="admin-area" class="card admin-only hidden">
            <h3>‚öô Admin Dashboard</h3>
            <div id="adminContent" style="margin-top:16px">
              <div class="muted">Please log in as an admin to access administrative features</div>
            </div>
          </div>
        </div>

        <aside id="sideColumn">
          <div class="card">
            <h4>‚ö° Quick Actions</h4>
            <div style="margin-top:12px; display: flex; flex-direction: column; gap: 10px;">
              <button class="primary" id="uploadLectureBtn">üì§ Upload Lecture</button>
              <button class="accent" id="openPdfLibraryBtn">üìö Open StudyHub</button>
              <button class="secondary admin-only" id="manageUsersBtn">üë• Manage Users</button>
            </div>

            <div style="margin-top:20px">
              <label class="muted">üîÄ Switch View</label>
              <select id="viewSelect" style="margin-top:8px;width:100%">
                <option value="student">üéì Student View</option>
                <option value="lecturer">üë®‚Äçüè´ Lecturer View</option>
                <option value="pdfs">üìö PDF Library</option>
                <option value="admin" class="admin-only">‚öô Admin Dashboard</option>
              </select>
            </div>

            <div style="margin-top:20px">
              <h5>üìà Platform Stats</h5>
              <div id="dashboardPreview" class="muted">Loading statistics...</div>
            </div>

            <div style="margin-top:20px">
              <h5>üîó Quick Navigation</h5>
              <div class="navigation-buttons">
                <a href="Student Dashboard 2.0.html" class="nav-btn">üéì Student Dashboard</a>
                <a href="lecturer 4.0.html" class="nav-btn">üë®‚Äçüè´ Lecturer Dashboard</a>
                <a href="Admin Dasboard 1.0.html" class="nav-btn admin-only">‚öô Admin Dashboard</a>
                <a href="index.html" class="nav-btn">üìö Open-StudyHub</a>
              </div>
            </div>
          </div>

          <div class="card" style="margin-top:16px">
            <h4>‚Ñπ About This Platform</h4>
            <p class="muted">Complete learning platform with video lectures, PDF resources, and interactive features. All data stored locally in your browser.</p>
          </div>
        </aside>
      </div>
    </div>

    <!-- PDF Library Content -->
    <div id="pdf-library" class="pdf-library">
      <div class="pdf-header">
        <h2>üìö OpenStudyHub</h2>
        <p>The Digital Hub for Student Success</p>
        <div style="margin-top: 1rem;">
          <button class="secondary" id="backToAcademyBtn">‚Üê Back to Academy</button>
        </div>
      </div>

      <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; flex-wrap: wrap; gap: 1rem;">
          <h3 style="margin: 0;">üìÑ Free PDF Resources</h3>
          <div class="pdf-search">
            <input type="text" id="pdfSearch" placeholder="Search PDFs by title, course, or description...">
          </div>
        </div>

        <div class="pdf-grid" id="pdfGrid">
          <!-- PDF cards will be populated by JavaScript -->
        </div>
      </div>

      <div class="card" style="margin-top: 20px;">
        <h4>ü§ù Contribute to StudyHub</h4>
        <p class="muted">Have educational PDFs to share? Help grow our library by contributing your resources.</p>
        <button class="secondary" style="margin-top: 12px;" id="contributePdfBtn">+ Add PDF Resource</button>
      </div>
    </div>
  </div>

  <!-- Modals -->
  <div id="modal" class="modal-backdrop">
    <div class="modal card">
      <div id="authWrap">
        <h3>üîë Login / Register</h3>
        <div class="field">
          <label>Role</label>
          <select id="authRole">
            <option value="student">Student</option>
            <option value="lecturer">Lecturer</option>
            <!-- Admin role removed from registration options -->
          </select>
        </div>
        <div class="field">
          <label>Username</label>
          <input id="authUsername" placeholder="Choose a username" autocomplete="username">
          <div class="error-message" id="usernameError"></div>
        </div>
        <div class="field">
          <label>Email</label>
          <input id="authEmail" type="email" placeholder="email@example.com" autocomplete="email">
          <div class="error-message" id="emailError"></div>
        </div>
        <div class="field">
          <label>Password</label>
          <input id="authPassword" type="password" placeholder="Enter password" autocomplete="new-password">
          <div class="error-message" id="passwordError"></div>
        </div>
        
        <!-- Admin Login Section (Hidden by default) -->
        <div id="adminLoginSection" class="hidden">
          <div class="field">
            <label>Admin Password</label>
            <input id="adminPassword" type="password" placeholder="Enter admin password" autocomplete="current-password">
            <div class="error-message" id="adminPasswordError"></div>
          </div>
          <div class="admin-warning">
            <p>‚ö† Admin access is restricted. Use pre-configured admin credentials.</p>
          </div>
        </div>
        
        <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
          <button class="primary" id="registerBtn">Register</button>
          <button class="secondary" id="loginBtn">Login</button>
          <button class="secondary" id="adminLoginBtn">Admin Login</button>
          <button class="secondary" id="closeModalBtn">Close</button>
        </div>
        <p class="muted" style="margin-top:16px">Register creates a simple local account. No servers involved.</p>
      </div>
      
      <div id="uploadWrap" class="hidden">
        <h3>üì§ Upload Lecture</h3>
        <div class="field">
          <label>Title *</label>
          <input id="upTitle" placeholder="Lecture title">
          <div class="error-message" id="titleError"></div>
        </div>
        <div class="field">
          <label>Description</label>
          <textarea id="upDesc" placeholder="Lecture description" rows="3"></textarea>
        </div>
        <div class="field">
          <label>Video URL *</label>
          <input id="upVideoUrl" placeholder="https://example.com/video.mp4">
          <div class="error-message" id="videoUrlError"></div>
        </div>
        <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
          <button class="primary" id="submitLectureBtn">Upload Lecture</button>
          <button class="secondary" id="cancelUploadBtn">Cancel</button>
        </div>
      </div>
      
      <div id="pdfUploadWrap" class="hidden">
        <h3>üìö Add PDF Resource</h3>
        <div class="field">
          <label>Title *</label>
          <input id="pdfTitle" placeholder="PDF title">
          <div class="error-message" id="pdfTitleError"></div>
        </div>
        <div class="field">
          <label>Course/Subject</label>
          <input id="pdfCourse" placeholder="e.g. Mathematics, Computer Science">
        </div>
        <div class="field">
          <label>Description</label>
          <textarea id="pdfDesc" placeholder="Brief description of the PDF content" rows="3"></textarea>
        </div>
        <div class="field">
          <label>PDF URL *</label>
          <input id="pdfUrl" placeholder="https://example.com/document.pdf">
          <div class="error-message" id="pdfUrlError"></div>
        </div>
        <div style="display:flex;gap:10px;margin-top:16px;flex-wrap:wrap">
          <button class="primary" id="submitPdfBtn">Add PDF Resource</button>
          <button class="secondary" id="cancelPdfBtn">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Application State
    const state = {
      currentUser: null,
      currentView: 'student',
      lectures: [],
      pdfs: [],
      theme: 'dark'
    };

    // Pre-configured Admin Account
    const ADMIN_CREDENTIALS = {
      username: 'CHIEF_ADMIN',
      password: 'admin123',
      email: 'admin@academyaccess.com',
      role: 'admin'
    };

    // DOM Elements
    const elements = {
      // Tabs and Views
      roleStudent: document.getElementById('role-student'),
      roleLecturer: document.getElementById('role-lecturer'),
      rolePdfs: document.getElementById('role-pdfs'),
      roleAdmin: document.getElementById('role-admin'),
      studentArea: document.getElementById('student-area'),
      lecturerArea: document.getElementById('lecturer-area'),
      adminArea: document.getElementById('admin-area'),
      pdfLibrary: document.getElementById('pdf-library'),
      academyContent: document.getElementById('academy-content'),
      
      // Authentication
      userGreet: document.getElementById('user-greet'),
      openAuth: document.getElementById('openAuth'),
      logoutBtn: document.getElementById('logoutBtn'),
      themeBtn: document.getElementById('themeBtn'),
      viewSelect: document.getElementById('viewSelect'),
      
      // Modals
      modal: document.getElementById('modal'),
      authWrap: document.getElementById('authWrap'),
      uploadWrap: document.getElementById('uploadWrap'),
      pdfUploadWrap: document.getElementById('pdfUploadWrap'),
      closeModalBtn: document.getElementById('closeModalBtn'),
      
      // Auth Form
      authRole: document.getElementById('authRole'),
      authUsername: document.getElementById('authUsername'),
      authEmail: document.getElementById('authEmail'),
      authPassword: document.getElementById('authPassword'),
      adminLoginSection: document.getElementById('adminLoginSection'),
      adminPassword: document.getElementById('adminPassword'),
      registerBtn: document.getElementById('registerBtn'),
      loginBtn: document.getElementById('loginBtn'),
      adminLoginBtn: document.getElementById('adminLoginBtn'),
      
      // Lecture Management
      uploadLectureBtn: document.getElementById('uploadLectureBtn'),
      lecturesList: document.getElementById('lecturesList'),
      upTitle: document.getElementById('upTitle'),
      upDesc: document.getElementById('upDesc'),
      upVideoUrl: document.getElementById('upVideoUrl'),
      submitLectureBtn: document.getElementById('submitLectureBtn'),
      cancelUploadBtn: document.getElementById('cancelUploadBtn'),
      
      // Video Player
      playerArea: document.getElementById('playerArea'),
      player: document.getElementById('player'),
      playingTitle: document.getElementById('playingTitle'),
      playingViews: document.getElementById('playingViews'),
      viewStatus: document.getElementById('viewStatus'),
      closePlayer: document.getElementById('closePlayer'),
      aiExplain: document.getElementById('aiExplain'),
      watermark: document.getElementById('watermark'),
      
      // PDF Library
      openPdfLibraryBtn: document.getElementById('openPdfLibraryBtn'),
      backToAcademyBtn: document.getElementById('backToAcademyBtn'),
      pdfSearch: document.getElementById('pdfSearch'),
      pdfGrid: document.getElementById('pdfGrid'),
      contributePdfBtn: document.getElementById('contributePdfBtn'),
      
      // PDF Upload
      pdfTitle: document.getElementById('pdfTitle'),
      pdfCourse: document.getElementById('pdfCourse'),
      pdfDesc: document.getElementById('pdfDesc'),
      pdfUrl: document.getElementById('pdfUrl'),
      submitPdfBtn: document.getElementById('submitPdfBtn'),
      cancelPdfBtn: document.getElementById('cancelPdfBtn'),
      
      // Dashboard
      dashboardContent: document.getElementById('dashboardContent'),
      adminContent: document.getElementById('adminContent'),
      dashboardPreview: document.getElementById('dashboardPreview'),
      
      // Admin
      manageUsersBtn: document.getElementById('manageUsersBtn')
    };

    // Initialize the application
    function init() {
      loadState();
      setupEventListeners();
      renderUI();
      loadSampleData();
      initializeAdminAccount();
    }

    // Initialize admin account if it doesn't exist
    function initializeAdminAccount() {
      const users = JSON.parse(localStorage.getItem('academyAccessUsers') || '[]');
      const adminExists = users.find(u => u.role === 'admin');
      
      if (!adminExists) {
        users.push(ADMIN_CREDENTIALS);
        localStorage.setItem('academyAccessUsers', JSON.stringify(users));
      }
    }

    // Load state from localStorage
    function loadState() {
      const savedState = localStorage.getItem('academyAccessState');
      if (savedState) {
        const parsed = JSON.parse(savedState);
        state.currentUser = parsed.currentUser;
        state.lectures = parsed.lectures || [];
        state.pdfs = parsed.pdfs || [];
        state.theme = parsed.theme || 'dark';
      }
      
      // Set theme
      document.documentElement.setAttribute('data-theme', state.theme);
      elements.themeBtn.textContent = state.theme === 'dark' ? '‚òÄ Light Mode' : 'üåô Dark Mode';
    }

    // Save state to localStorage
    function saveState() {
      localStorage.setItem('academyAccessState', JSON.stringify(state));
    }

    // Set up event listeners
    function setupEventListeners() {
      // Tab navigation
      elements.roleStudent.addEventListener('click', () => switchView('student'));
      elements.roleLecturer.addEventListener('click', () => switchView('lecturer'));
      elements.rolePdfs.addEventListener('click', () => switchView('pdfs'));
      elements.roleAdmin.addEventListener('click', () => switchView('admin'));
      elements.viewSelect.addEventListener('change', (e) => switchView(e.target.value));
      
      // StudyHub Navigation
      elements.openPdfLibraryBtn.addEventListener('click', () => switchView('pdfs'));
      elements.backToAcademyBtn.addEventListener('click', () => switchView('student'));
      
      // Authentication
      elements.openAuth.addEventListener('click', openAuthModal);
      elements.logoutBtn.addEventListener('click', logout);
      elements.registerBtn.addEventListener('click', register);
      elements.loginBtn.addEventListener('click', login);
      elements.adminLoginBtn.addEventListener('click', adminLogin);
      elements.closeModalBtn.addEventListener('click', closeModal);
      
      // Theme toggle
      elements.themeBtn.addEventListener('click', toggleTheme);
      
      // Lecture management
      elements.uploadLectureBtn.addEventListener('click', openUploadModal);
      elements.submitLectureBtn.addEventListener('click', uploadLecture);
      elements.cancelUploadBtn.addEventListener('click', closeModal);
      
      // PDF management
      elements.contributePdfBtn.addEventListener('click', openPdfUploadModal);
      elements.submitPdfBtn.addEventListener('click', uploadPdf);
      elements.cancelPdfBtn.addEventListener('click', closeModal);
      elements.pdfSearch.addEventListener('input', searchPdfs);
      
      // Video player
      elements.closePlayer.addEventListener('click', closePlayer);
      elements.aiExplain.addEventListener('click', showAiExplanation);
      
      // Admin management
      elements.manageUsersBtn.addEventListener('click', manageUsers);
      
      // Modal backdrop click to close
      elements.modal.addEventListener('click', (e) => {
        if (e.target === elements.modal) closeModal();
      });
    }

    // Switch between views
    function switchView(view) {
      // If trying to access admin view without admin privileges
      if (view === 'admin' && (!state.currentUser || state.currentUser.role !== 'admin')) {
        alert('Admin access required. Please log in with admin credentials.');
        openAuthModal();
        return;
      }
      
      // If trying to access external dashboards
      if (view === 'student' && state.currentView === 'student') {
        window.location.href = 'Student Dashboard 2.0.html';
        return;
      } else if (view === 'lecturer' && state.currentView === 'lecturer') {
        window.location.href = 'lecturer 4.0.html';
        return;
      } else if (view === 'admin' && state.currentView === 'admin') {
        window.location.href = 'Admin Dasboard 1.0.html';
        return;
      }
      
      state.currentView = view;
      renderUI();
    }

    // Render UI based on current state
    function renderUI() {
      // Update user greeting
      if (state.currentUser) {
        elements.userGreet.textContent = `Hello, ${state.currentUser.username} (${state.currentUser.role})`;
        elements.logoutBtn.classList.remove('hidden');
        elements.openAuth.classList.add('hidden');
      } else {
        elements.userGreet.textContent = 'Not logged in';
        elements.logoutBtn.classList.add('hidden');
        elements.openAuth.classList.remove('hidden');
      }
      
      // Update active tab
      document.querySelectorAll('.tabs button').forEach(btn => btn.classList.remove('active'));
      document.getElementById(`role-${state.currentView}`).classList.add('active');
      elements.viewSelect.value = state.currentView;
      
      // Show/hide appropriate views
      elements.studentArea.classList.toggle('hidden', state.currentView !== 'student');
      elements.lecturerArea.classList.toggle('hidden', state.currentView !== 'lecturer');
      elements.adminArea.classList.toggle('hidden', state.currentView !== 'admin');
      elements.academyContent.classList.toggle('hidden', state.currentView === 'pdfs');
      elements.pdfLibrary.classList.toggle('hidden', state.currentView !== 'pdfs');
      
      // Hide admin elements for non-admin users
      const adminElements = document.querySelectorAll('.admin-only');
      if (state.currentUser && state.currentUser.role === 'admin') {
        adminElements.forEach(el => el.classList.remove('hidden'));
      } else {
        adminElements.forEach(el => el.classList.add('hidden'));
        // Ensure admin view is not active for non-admins
        if (state.currentView === 'admin') {
          state.currentView = 'student';
          document.getElementById(role-student).classList.add('active');
          elements.viewSelect.value = 'student';
          elements.studentArea.classList.remove('hidden');
        }
      }
      
      // Render content based on view
      if (state.currentView === 'student') {
        renderLectures();
      } else if (state.currentView === 'lecturer') {
        renderLecturerDashboard();
      } else if (state.currentView === 'admin') {
        renderAdminDashboard();
      } else if (state.currentView === 'pdfs') {
        renderPdfs();
      }
      
      // Update dashboard preview
      updateDashboardPreview();
    }

    // Toggle theme
    function toggleTheme() {
      state.theme = state.theme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', state.theme);
      elements.themeBtn.textContent = state.theme === 'dark' ? '‚òÄ Light Mode' : 'üåô Dark Mode';
      saveState();
    }

    // Open authentication modal
    function openAuthModal() {
      elements.authWrap.classList.remove('hidden');
      elements.uploadWrap.classList.add('hidden');
      elements.pdfUploadWrap.classList.add('hidden');
      elements.adminLoginSection.classList.add('hidden');
      elements.modal.classList.add('show');
      clearFormErrors();
    }

    // Open upload lecture modal
    function openUploadModal() {
      if (!state.currentUser || (state.currentUser.role !== 'lecturer' && state.currentUser.role !== 'admin')) {
        alert('Please log in as a lecturer or admin to upload lectures.');
        openAuthModal();
        return;
      }
      
      elements.authWrap.classList.add('hidden');
      elements.uploadWrap.classList.remove('hidden');
      elements.pdfUploadWrap.classList.add('hidden');
      elements.modal.classList.add('show');
    }

    // Open PDF upload modal
    function openPdfUploadModal() {
      if (!state.currentUser) {
        alert('Please log in to contribute PDFs.');
        openAuthModal();
        return;
      }
      
      elements.authWrap.classList.add('hidden');
      elements.uploadWrap.classList.add('hidden');
      elements.pdfUploadWrap.classList.remove('hidden');
      elements.modal.classList.add('show');
    }

    // Close modal
    function closeModal() {
      elements.modal.classList.remove('show');
      clearFormErrors();
    }

    // Clear form errors
    function clearFormErrors() {
      document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none';
      });
      document.querySelectorAll('input.error').forEach(el => {
        el.classList.remove('error');
      });
    }

    // Show form error
    function showError(fieldId, message) {
      const field = document.getElementById(fieldId);
      const errorEl = document.getElementById(`${fieldId}Error`);
      
      if (field && errorEl) {
        field.classList.add('error');
        errorEl.textContent = message;
        errorEl.style.display = 'block';
      }
    }

    // Register new user
    function register() {
      const role = elements.authRole.value;
      const username = elements.authUsername.value.trim();
      const email = elements.authEmail.value.trim();
      const password = elements.authPassword.value;
      
      // Basic validation
      if (!username) {
        showError('username', 'Username is required');
        return;
      }
      
      if (!email || !isValidEmail(email)) {
        showError('email', 'Valid email is required');
        return;
      }
      
      if (!password || password.length < 6) {
        showError('password', 'Password must be at least 6 characters');
        return;
      }
      
      // Check if user already exists
      const users = JSON.parse(localStorage.getItem('academyAccessUsers') || '[]');
      if (users.find(u => u.username === username)) {
        showError('username', 'Username already taken');
        return;
      }
      
      if (users.find(u => u.email === email)) {
        showError('email', 'Email already registered');
        return;
      }
      
      // Create user (admin role is not available for registration)
      const newUser = { role, username, email, password };
      users.push(newUser);
      localStorage.setItem('academyAccessUsers', JSON.stringify(users));
      
      // Log in the user
      state.currentUser = newUser;
      saveState();
      closeModal();
      renderUI();
      
      alert(`Welcome to Academy Access, ${username}!`);
    }

    // Login user
    function login() {
      const username = elements.authUsername.value.trim();
      const password = elements.authPassword.value;
      
      if (!username || !password) {
        alert('Please enter both username and password');
        return;
      }
      
      const users = JSON.parse(localStorage.getItem('academyAccessUsers') || '[]');
      const user = users.find(u => u.username === username && u.password === password && u.role !== 'admin');
      
      if (user) {
        state.currentUser = user;
        saveState();
        closeModal();
        renderUI();
        alert(`Welcome back, ${username}!`);
      } else {
        alert('Invalid username or password');
      }
    }

    // Admin login
    function adminLogin() {
      // Show admin login section
      elements.adminLoginSection.classList.remove('hidden');
      
      const username = elements.authUsername.value.trim();
      const password = elements.authPassword.value;
      const adminPassword = elements.adminPassword.value;
      
      if (!username || !password || !adminPassword) {
        alert('Please enter all required fields for admin login');
        return;
      }
      
      // Check against pre-configured admin credentials
      if (username === ADMIN_CREDENTIALS.username && 
          password === ADMIN_CREDENTIALS.password &&
          adminPassword === ADMIN_CREDENTIALS.password) {
        
        state.currentUser = ADMIN_CREDENTIALS;
        saveState();
        closeModal();
        renderUI();
        alert('Admin login successful!');
      } else {
        alert('Invalid admin credentials');
      }
    }

    // Logout user
    function logout() {
      state.currentUser = null;
      saveState();
      renderUI();
      alert('You have been logged out.');
    }

    // Upload new lecture
    function uploadLecture() {
      const title = elements.upTitle.value.trim();
      const description = elements.upDesc.value.trim();
      const videoUrl = elements.upVideoUrl.value.trim();
      
      // Validation
      if (!title) {
        showError('title', 'Title is required');
        return;
      }
      
      if (!videoUrl) {
        showError('videoUrl', 'Video URL is required');
        return;
      }
      
      // Create lecture
      const newLecture = {
        id: Date.now().toString(),
        title,
        description,
        videoUrl,
        views: 0,
        uploader: state.currentUser.username,
        timestamp: new Date().toISOString()
      };
      
      state.lectures.push(newLecture);
      saveState();
      closeModal();
      renderUI();
      
      alert('Lecture uploaded successfully!');
    }

    // Upload new PDF
    function uploadPdf() {
      const title = elements.pdfTitle.value.trim();
      const course = elements.pdfCourse.value.trim();
      const description = elements.pdfDesc.value.trim();
      const url = elements.pdfUrl.value.trim();
      
      // Validation
      if (!title) {
        showError('pdfTitle', 'Title is required');
        return;
      }
      
      if (!url) {
        showError('pdfUrl', 'PDF URL is required');
        return;
      }
      
      // Create PDF
      const newPdf = {
        id: Date.now().toString(),
        title,
        course,
        description,
        url,
        contributor: state.currentUser.username,
        timestamp: new Date().toISOString()
      };
      
      state.pdfs.push(newPdf);
      saveState();
      closeModal();
      renderUI();
      
      alert('PDF resource added successfully!');
    }

    // Render lectures list
    function renderLectures() {
      if (state.lectures.length === 0) {
        elements.lecturesList.innerHTML = `
          <div class="empty-state">
            <h4>No lectures available</h4>
            <p>Check back later or log in as a lecturer to upload content.</p>
          </div>
        `;
        return;
      }
      
      elements.lecturesList.innerHTML = state.lectures.map(lecture => `
        <div class="lecture" data-id="${lecture.id}">
          <div class="meta">
            <strong>${lecture.title}</strong>
            <div class="muted">${lecture.description || 'No description'}</div>
            <div class="muted" style="margin-top: 4px; font-size: 0.8rem;">
              üë§ ${lecture.uploader} ‚Ä¢ üëÄ ${lecture.views} views
            </div>
          </div>
          <button class="primary">‚ñ∂ Play</button>
        </div>
      `).join('');
      
      // Add event listeners to play buttons
      elements.lecturesList.querySelectorAll('.lecture').forEach(lectureEl => {
        lectureEl.addEventListener('click', (e) => {
          if (e.target.tagName === 'BUTTON') {
            const lectureId = lectureEl.dataset.id;
            const lecture = state.lectures.find(l => l.id === lectureId);
            if (lecture) playLecture(lecture);
          }
        });
      });
    }

    // Play a lecture
    function playLecture(lecture) {
      elements.player.src = lecture.videoUrl;
      elements.playingTitle.textContent = lecture.title;
      elements.playingViews.textContent = lecture.views;
      
      // Update watermark
      const username = state.currentUser ? state.currentUser.username : 'guest';
      const userId = state.currentUser ? state.currentUser.username.substring(0, 6) : 'no-id';
      elements.watermark.textContent = `${username} ‚Ä¢ ${userId}`;
      
      // Show player, hide lectures list
      elements.studentArea.classList.add('hidden');
      elements.playerArea.classList.remove('hidden');
      
      // Increment view count
      lecture.views++;
      saveState();
      
      // Show view status
      elements.viewStatus.classList.remove('hidden');
      elements.viewStatus.classList.add('success');
      setTimeout(() => {
        elements.viewStatus.classList.add('hidden');
      }, 3000);
    }

    // Close video player
    function closePlayer() {
      elements.player.pause();
      elements.player.src = '';
      elements.playerArea.classList.add('hidden');
      elements.studentArea.classList.remove('hidden');
    }

    // Show AI explanation (placeholder)
    function showAiExplanation() {
      alert('AI Explanation feature would analyze the current video content and provide additional insights. This is a premium feature that would require integration with an AI service.');
    }

    // Render PDF library
    function renderPdfs() {
      if (state.pdfs.length === 0) {
        elements.pdfGrid.innerHTML = `
          <div class="empty-state" style="grid-column: 1 / -1;">
            <h4>No PDF resources available</h4>
            <p>Be the first to contribute to our library!</p>
          </div>
        `;
        return;
      }
      
      elements.pdfGrid.innerHTML = state.pdfs.map(pdf => `
        <div class="pdf-card">
          <div class="pdf-title">${pdf.title}</div>
          <p class="muted">${pdf.description || 'No description available.'}</p>
          <div class="pdf-meta">
            <span class="pdf-course">${pdf.course || 'General'}</span>
            <button class="download-btn" data-url="${pdf.url}">üì• Download</button>
          </div>
        </div>
      `).join('');
      
      // Add event listeners to download buttons
      elements.pdfGrid.querySelectorAll('.download-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const url = btn.dataset.url;
          window.open(url, '_blank');
        });
      });
    }

    // Search PDFs
    function searchPdfs() {
      const query = elements.pdfSearch.value.toLowerCase();
      
      if (!query) {
        renderPdfs();
        return;
      }
      
      const filteredPdfs = state.pdfs.filter(pdf => 
        pdf.title.toLowerCase().includes(query) ||
        (pdf.course && pdf.course.toLowerCase().includes(query)) ||
        (pdf.description && pdf.description.toLowerCase().includes(query))
      );
      
      if (filteredPdfs.length === 0) {
        elements.pdfGrid.innerHTML = `
          <div class="empty-state" style="grid-column: 1 / -1;">
            <h4>No matching PDFs found</h4>
            <p>Try adjusting your search terms</p>
          </div>
        `;
        return;
      }
      
      elements.pdfGrid.innerHTML = filteredPdfs.map(pdf => `
        <div class="pdf-card">
          <div class="pdf-title">${pdf.title}</div>
          <p class="muted">${pdf.description || 'No description available.'}</p>
          <div class="pdf-meta">
            <span class="pdf-course">${pdf.course || 'General'}</span>
            <button class="download-btn" data-url="${pdf.url}">üì• Download</button>
          </div>
        </div>
      `).join('');
      
      // Re-add event listeners
      elements.pdfGrid.querySelectorAll('.download-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          const url = btn.dataset.url;
          window.open(url, '_blank');
        });
      });
    }

    // Render lecturer dashboard
    function renderLecturerDashboard() {
      if (!state.currentUser || (state.currentUser.role !== 'lecturer' && state.currentUser.role !== 'admin')) {
        elements.dashboardContent.innerHTML = `
          <div class="empty-state">
            <h4>Lecturer Access Required</h4>
            <p>Please log in with a lecturer account to access this dashboard.</p>
            <button class="primary" style="margin-top: 16px;" id="dashboardLoginBtn">Log In</button>
          </div>
        `;
        
        document.getElementById('dashboardLoginBtn').addEventListener('click', openAuthModal);
        return;
      }
      
      const myLectures = state.lectures.filter(l => l.uploader === state.currentUser.username);
      const totalViews = myLectures.reduce((sum, lecture) => sum + lecture.views, 0);
      
      elements.dashboardContent.innerHTML = `
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">${myLectures.length}</div>
            <div class="stat-label">My Lectures</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${totalViews}</div>
            <div class="stat-label">Total Views</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${myLectures.length > 0 ? Math.round(totalViews / myLectures.length) : 0}</div>
            <div class="stat-label">Avg. Views</div>
          </div>
        </div>
        
        <h4>My Uploaded Lectures</h4>
        ${myLectures.length > 0 ? `
          <div style="margin-top: 16px;">
            ${myLectures.map(lecture => `
              <div class="lecture">
                <div class="meta">
                  <strong>${lecture.title}</strong>
                  <div class="muted">${lecture.description || 'No description'}</div>
                  <div class="muted" style="margin-top: 4px; font-size: 0.8rem;">
                    üëÄ ${lecture.views} views ‚Ä¢ üìÖ ${new Date(lecture.timestamp).toLocaleDateString()}
                  </div>
                </div>
                <button class="secondary" data-id="${lecture.id}">üìä Stats</button>
              </div>
            `).join('')}
          </div>
        ` : `
          <div class="empty-state" style="padding: 20px;">
            <p>You haven't uploaded any lectures yet.</p>
            <button class="primary" style="margin-top: 12px;" id="firstUploadBtn">Upload Your First Lecture</button>
          </div>
        `}
      `;
      
      // Add event listeners
      if (myLectures.length === 0) {
        document.getElementById('firstUploadBtn').addEventListener('click', openUploadModal);
      } else {
        elements.dashboardContent.querySelectorAll('button[data-id]').forEach(btn => {
          btn.addEventListener('click', () => {
            const lectureId = btn.dataset.id;
            const lecture = myLectures.find(l => l.id === lectureId);
            if (lecture) {
              alert(`Detailed stats for "${lecture.title}":\n\n‚Ä¢ Views: ${lecture.views}\n‚Ä¢ Uploaded: ${new Date(lecture.timestamp).toLocaleString()}`);
            }
          });
        });
      }
    }

    // Render admin dashboard
    function renderAdminDashboard() {
      if (!state.currentUser || state.currentUser.role !== 'admin') {
        elements.adminContent.innerHTML = `
          <div class="empty-state">
            <h4>Admin Access Required</h4>
            <p>Please log in with admin credentials to access this dashboard.</p>
            <button class="primary" style="margin-top: 16px;" id="adminDashboardLoginBtn">Admin Login</button>
          </div>
        `;
        
        document.getElementById('adminDashboardLoginBtn').addEventListener('click', openAuthModal);
        return;
      }
      
      const totalUsers = JSON.parse(localStorage.getItem('academyAccessUsers') || '[]').length;
      const totalLectures = state.lectures.length;
      const totalPdfs = state.pdfs.length;
      const totalViews = state.lectures.reduce((sum, lecture) => sum + lecture.views, 0);
      
      elements.adminContent.innerHTML = `
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">${totalUsers}</div>
            <div class="stat-label">Total Users</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${totalLectures}</div>
            <div class="stat-label">Total Lectures</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${totalPdfs}</div>
            <div class="stat-label">PDF Resources</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">${totalViews}</div>
            <div class="stat-label">Total Views</div>
          </div>
        </div>
        
        <h4>Platform Management</h4>
        <div style="display: flex; flex-direction: column; gap: 12px; margin-top: 16px;">
          <button class="primary" id="viewAllUsersBtn">üë• View All Users</button>
          <button class="secondary" id="systemSettingsBtn">‚öô System Settings</button>
          <button class="secondary" id="backupDataBtn">üíæ Backup Data</button>
        </div>
        
        <div style="margin-top: 20px;">
          <h4>Recent Activity</h4>
          <div class="muted" style="margin-top: 8px;">
            <p>‚Ä¢ Last login: ${new Date().toLocaleString()}</p>
            <p>‚Ä¢ Platform version: 2.0.1</p>
            <p>‚Ä¢ Admin privileges: Active</p>
          </div>
        </div>
      `;
      
      // Add event listeners for admin buttons
      document.getElementById('viewAllUsersBtn').addEventListener('click', manageUsers);
      document.getElementById('systemSettingsBtn').addEventListener('click', () => {
        alert('System settings would open here in a full implementation.');
      });
      document.getElementById('backupDataBtn').addEventListener('click', () => {
        alert('Data backup functionality would be implemented here.');
      });
    }

    // Manage users (admin function)
    function manageUsers() {
      const users = JSON.parse(localStorage.getItem('academyAccessUsers') || '[]');
      const userList = users.map(user => 
        `‚Ä¢ ${user.username} (${user.role}) - ${user.email}`
      ).join('\n');
      
      alert(`Current Users:\n\n${userList}\n\nTotal: ${users.length} users`);
    }

    // Update dashboard preview in sidebar
    function updateDashboardPreview() {
      const totalLectures = state.lectures.length;
      const totalPdfs = state.pdfs.length;
      const totalViews = state.lectures.reduce((sum, lecture) => sum + lecture.views, 0);
      
      elements.dashboardPreview.innerHTML = `
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>Lectures:</span>
          <strong>${totalLectures}</strong>
        </div>
        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
          <span>PDF Resources:</span>
          <strong>${totalPdfs}</strong>
        </div>
        <div style="display: flex; justify-content: space-between;">
          <span>Total Views:</span>
          <strong>${totalViews}</strong>
        </div>
      `;
    }

    // Load sample data if none exists
    function loadSampleData() {
      if (state.lectures.length === 0) {
        state.lectures = [
          {
            id: '1',
            title: 'Introduction to Web Development',
            description: 'Learn the basics of HTML, CSS, and JavaScript',
            videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
            views: 42,
            uploader: 'prof_dev',
            timestamp: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString()
          },
          {
            id: '2',
            title: 'Data Structures and Algorithms',
            description: 'Understanding fundamental data structures',
            videoUrl: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4',
            views: 28,
            uploader: 'dr_coder',
            timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString()
          }
        ];
      }
      
      if (state.pdfs.length === 0) {
        state.pdfs = [
          {
            id: 'pdf1',
            title: 'Mathematics for Computer Science',
            course: 'Mathematics',
            description: 'Essential mathematical concepts for CS students',
            url: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf',
            contributor: 'math_prof',
            timestamp: new Date(Date.now() - 14 * 24 * 60 * 60 * 1000).toISOString()
          },
          {
            id: 'pdf2',
            title: 'Introduction to Python Programming',
            course: 'Computer Science',
            description: 'Beginner-friendly guide to Python',
            url: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf',
            contributor: 'code_master',
            timestamp: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString()
          },
          {
            id: 'pdf3',
            title: 'Principles of Economics',
            course: 'Economics',
            description: 'Fundamental concepts in micro and macro economics',
            url: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf',
            contributor: 'econ_expert',
            timestamp: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString()
          }
        ];
      }
      
      saveState();
    }

    // Utility function to validate email
    function isValidEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }

    // Initialize the application when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>